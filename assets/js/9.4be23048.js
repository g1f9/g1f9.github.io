(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{289:function(t,a,s){"use strict";s.r(a);var n=s(38),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"h5-开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#h5-开发","aria-hidden":"true"}},[t._v("#")]),t._v(" h5 开发")]),t._v(" "),s("h2",{attrs:{id:"h5-开发常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#h5-开发常见问题","aria-hidden":"true"}},[t._v("#")]),t._v(" H5 开发常见问题")]),t._v(" "),s("h3",{attrs:{id:"滚动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#滚动","aria-hidden":"true"}},[t._v("#")]),t._v(" 滚动")]),t._v(" "),s("h4",{attrs:{id:"局部滚动出界"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#局部滚动出界","aria-hidden":"true"}},[t._v("#")]),t._v(" 局部滚动出界")]),t._v(" "),s("p",[t._v("常见的场景就是在子元素中滚动中，滚到最顶部或最底部时由于 ios 的弹性滚动，界面超出，变成了全局滚动，")]),t._v(" "),s("p",[t._v("使用 touchstart 事件，判断是否滚动到了最顶端或者最底端，然后对 scrollTop 进行重新赋值，避免元素出界")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("ScrollFix")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("elem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" startY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" startTopScroll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'touchstart'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        startY "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touches"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        startTopScroll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当滚动条在最顶部的时候")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("startTopScroll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当滚动条在最底部的时候")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("startTopScroll "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" elem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"passive-优化滚动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#passive-优化滚动","aria-hidden":"true"}},[t._v("#")]),t._v(" passive 优化滚动")]),t._v(" "),s("p",[t._v("addEventListener 的第三个参数支持传入对象，其中有一个参数就是 passive。这个参数用来告诉浏览器，事件监听函数是否会调用 e.preventDefault 来组织默认事件。以滚动事件为例，浏览器无法知道一个 scroll 事件的监听函数是否调用了 preventDefault，只能等到监听函数执行完后再去执行默认事件，如果监听函数执行很长时间，那么就会造成页面卡顿。对于滚动事件而言，就得等到滚动的监听函数执行完，浏览器才能去做页面滚动，这样有可能会造成页面的滚动卡顿，因此使用 passive 告诉浏览器不会阻止默认事件，那么就能快速执行滚动了。")]),t._v(" "),s("h4",{attrs:{id:"移动滚动优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移动滚动优化","aria-hidden":"true"}},[t._v("#")]),t._v(" 移动滚动优化")]),t._v(" "),s("ol",[s("li",[t._v("body上加上 -webkit-overflow-scrolling: touch")]),t._v(" "),s("li",[t._v("iOS尽量使用局部滚动")]),t._v(" "),s("li",[t._v("iOS引进scrollFix避免出界")]),t._v(" "),s("li",[t._v("android下尽量使用全局滚动：\n"),s("ul",[s("li",[t._v("尽量不用 overflow：auto")]),t._v(" "),s("li",[t._v("使用min-height：100% 替代 height：100%；")])])]),t._v(" "),s("li",[t._v("iOS下带有滚动条且position: absolute 的节点不要设置背景色")]),t._v(" "),s("li",[t._v("固定区域使用 touchmove.preventDefault 来阻止引起全局的弹性滚动，但是会导致，如果从固定区域一直滑到滚动区域，即使在滚动区域进行滑动也会没有滚动效果")])])])},[],!1,null,null,null);a.default=e.exports}}]);